---
title: "Secure File Transfer without SDKs"
category: Cloud
date: 2024-11-18
excerpt: "Learn how to use SAS URLs (Azure) and Pre-Signed URLs (AWS S3) with simple tools like curl for secure file transfers without installing heavy SDKs."
readTime: 10
---

# Secure File Transfer without SDKs  
### SAS URL (Azure) and Pre-Signed URL (AWS S3) with simple tools like `curl`

When you have on-premises systems (Windows, Linux, Mini-PCs, gateways, etc.), you often just want:

- **A simple HTTPS URL**
- **Time-limited access**
- **No need to install heavy SDKs or CLIs**

Both major clouds provide this:

- **Azure** → Shared Access Signature (**SAS**) URL for Blob Storage  
- **AWS** → S3 **pre-signed URL**

Once these URLs are generated by a backend, *any* client that can issue HTTP(S) requests (browser, `curl`, `wget`, PowerShell, Python `requests`, etc.) can upload/download files—no Azure or AWS SDK required.

## 1. What is a SAS URL (Azure)?

A **SAS (Shared Access Signature) URL** is a normal HTTPS URL with extra query parameters that encode:

- Storage account & container/blob
- Allowed **permissions** (read/write/list/delete, etc.)
- **Start** and **expiry** time
- Optional **IP address** restrictions
- Optional **HTTPS only** flag

Example (shortened):

```text
https://myaccount.blob.core.windows.net/mycontainer/myfile.dcm?
sv=2023-11-03&st=2025-11-22T02%3A00Z&se=2025-11-22T05%3A00Z&
sr=b&sp=rw&sig=XXXXXXXXXXXXXXXX
```

If the SAS is configured with write permissions, you can upload; with read permissions, you can download.

## 2. What is a Pre-Signed URL (AWS S3)?

A **pre-signed URL** for Amazon S3 is also a normal HTTPS URL with extra query parameters:

- Bucket & object key
- Allowed **HTTP method** (GET, PUT, POST, etc.)
- **Expiry time**
- Signature using IAM user/role credentials

Example (shortened):

```text
https://my-bucket.s3.amazonaws.com/path/to/file.zip?
X-Amz-Algorithm=AWS4-HMAC-SHA256&
X-Amz-Credential=...&
X-Amz-Date=20251122T020000Z&
X-Amz-Expires=3600&
X-Amz-Signature=XXXXXXXXXXXXXXXX
```

## 3. Advantages of SAS / Pre-Signed URLs

### 3.1 No SDK required

- Client only needs HTTPS + basic HTTP support.
- Works with:
  - `curl`, `wget`
  - PowerShell (`Invoke-WebRequest`)
  - Python `requests`
  - Java `HttpClient`, C# `HttpClient`, etc.

### 3.2 Least-privilege, time-limited access

- URL can be:
  - **Read-only** (download)
  - **Write-only** (upload)
  - Valid for a **short period** (e.g., 10 minutes)
- Original storage keys or IAM credentials **never leave** your secure backend.

## 4. Disadvantages and Security Risks

While SAS URLs and pre-signed URLs offer convenience, they come with important security considerations:

### 4.1 URL Exposure Risk

SAS URLs and AWS pre-signed URLs are bearer tokens. Anyone who obtains the URL can use it until it expires. If the URL is:
- Logged in server logs or application logs
- Shared via insecure channels (email, chat)
- Exposed in browser history or network traces
- Intercepted during transmission

The URL can be used by unauthorized parties to access your storage.

### 4.2 No Immediate Revocation

Once issued, you cannot revoke a SAS or presigned URL. You must wait for expiration unless you rotate keys (which affects the entire system). This means:
- If a URL is compromised, you cannot immediately stop access
- Key rotation impacts all active URLs, potentially disrupting legitimate operations
- You must rely solely on expiration time for access control

### 4.3 MITM via TLS Inspection

If TLS/HTTPS interception is enabled (pfSense, Sophos, Fortigate, corporate proxies), the proxy can read and misuse the URL and the uploaded/downloaded data. This is particularly risky in:
- Corporate environments with SSL inspection
- Network security appliances that decrypt HTTPS traffic
- Man-in-the-middle scenarios where the proxy has access to both the URL and data

### 4.4 Overwrite/Tampering Risk

Incorrect permissions (e.g., giving write/read instead of write-only) can allow replacing existing files or injecting malicious data. This risk includes:
- Accidental overwrites of critical files
- Malicious data injection if URLs are compromised
- Unauthorized modifications to existing storage objects

### 4.5 Expiry Time Miscalculation

If upload takes longer than the SAS/presigned expiry, the file upload fails, causing partial or missing data. This is critical for:
- **DICOM workflows** where incomplete medical images can cause diagnostic errors
- Large file transfers that exceed the expiration window
- Network interruptions that delay upload completion
- Batch operations where timing is unpredictable

**Mitigation**: Always set expiry times longer than expected transfer duration, with buffer time for network issues.

## 5. AWS Alternative to SAS: S3 Pre-Signed URL

| Feature                     | Azure SAS URL (Blob)                                   | AWS S3 Pre-Signed URL                           |
|----------------------------|--------------------------------------------------------|-------------------------------------------------|
| Target service             | Blob Storage                                           | S3 Object Storage                               |
| Permissions granularity    | Container / Blob level (r, w, d, l, etc.)             | Object / bucket-level action (GET, PUT, etc.)   |
| Time-limited               | Yes                                                    | Yes                                            |
| SDK required on client?    | No                                                     | No                                             |

## 6. How to Download Using URL Only

### Azure Blob

```bash
curl -L -o output.dcm "https://<account>.blob.core.windows.net/<container>/<blob>?<sas-token>"
```

### AWS S3

```bash
curl -o file.zip "https://<bucket>.s3.amazonaws.com/path/file.zip?<signature>"
```

## 7. How to Upload Using URL Only

### Azure Blob PUT

```bash
curl -X PUT -T myfile.dcm -H "x-ms-blob-type: BlockBlob" "https://<account>.blob.core.windows.net/<container>/myfile.dcm?<sas-token>"
```

### AWS S3 PUT

```bash
curl -X PUT --upload-file myfile.dcm "https://<bucket>.s3.amazonaws.com/path/myfile.dcm?<signature>"
```

## 8. PowerShell Examples

### Download

```powershell
Invoke-WebRequest -Uri $uri -OutFile $out
```

### Upload

```powershell
Invoke-WebRequest -Uri $uri -Method Put -InFile $file
```

## 9. Summary

SAS URLs (Azure) and Pre-Signed URLs (AWS) allow secure file uploads/downloads using only HTTPS, with no SDK installation required. This makes them perfect for on-premises systems, embedded devices, and any scenario where you need simple, secure file transfer without the overhead of cloud SDKs.

